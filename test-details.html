<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Details</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/test-details.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="back-btn" id="back-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                Back to Dashboard
            </button>
            <h1 id="test-name" class="test-title">Test Details</h1>
            <div class="deploy-button-container">
                <button id="deploy-test-btn" class="deploy-button" style="display: none;">
                    Deploy Test for Students
                </button>
            </div>
        </div>
        
        <div id="loading-indicator" class="loading">
            <svg class="animate-spin h-8 w-8 text-gray-400 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <p class="mt-4">Loading test details...</p>
        </div>
        
        <div id="error-message" class="error-message" style="display: none;"></div>
        
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Add Students</h2>
            </div>
            <div id="add-students-section" class="add-students-section" style="display: none;">
                <p class="text-secondary">Enter email addresses (one per line):</p>
                <textarea id="student-emails" rows="5" placeholder="student1@example.com&#10;student2@example.com&#10;student3@example.com"></textarea>
                <button id="add-students-btn" class="action-button view-report-btn">Add Students</button>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Students List</h2>
            </div>
            <table class="student-table" id="students-table" style="display: none;">
                <thead>
                    <tr>
                        <th>Student Email</th>
                        <th class="score-column">Score</th>
                        <th class="actions-column">Actions</th>
                    </tr>
                </thead>
                <tbody id="students-list">
                    <!-- Students will be inserted here -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    
    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
        // Initialize EmailJS with your public key
        try {
            emailjs.init("UQO5y-V-Z0Q1o5DUG");
            console.log('EmailJS initialized successfully');
        } catch (error) {
            console.error('Failed to initialize EmailJS:', error);
        }
        
        // Email template
        const emailTemplate = {
            service_id: "service_zkrdtgj",
            template_id: "template_oe740ul",
            template_params: {
                test_name: "",
                test_id: "",
                test_link: "https://akxyn.github.io/quiz-app/quiz.html",
                email: "",
                company_name: ""
            }
        };
    </script>
    
    <!-- Your config -->
    <script src="js/firebase.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/test-details.js"></script>
</body>
</html>